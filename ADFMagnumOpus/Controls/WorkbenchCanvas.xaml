<UserControl x:Class="ADFMagnumOpus.Controls.WorkbenchCanvas"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:ADFMagnumOpus.Controls"
             xmlns:models="clr-namespace:ADFMagnumOpus.Models"
             xmlns:shell="clr-namespace:ADFMagnumOpus.Shell">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <!--<DockPanel Grid.Row="0" Background="#3a3a3a" Height="28">
            --><!-- add buttons, menus, etc. here --><!--
            <TextBlock Text="Workbench Toolbar" Foreground="White" Margin="8,0"/>
        </DockPanel>-->

        <!-- Main desktop area -->
        <ItemsControl Grid.Row="1" x:Name="DesktopHost" ItemsSource="{Binding Workbench.Icons}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <!-- The desktop surface -->
                    <Canvas Background="{StaticResource WB.Brush.WindowGray}"
                            shell:WorkbenchContextMenuBehavior.Enable="True"
                            shell:WorkbenchContextMenuBehavior.Menu="{StaticResource WorkbenchCanvasMenu}"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <!-- Position the *container* on the Canvas using RectItem.Left/Top -->
            <ItemsControl.ItemContainerStyle>
                <Style TargetType="ContentPresenter">
                    <Setter Property="Canvas.Left" Value="{Binding Left}" />
                    <Setter Property="Canvas.Top" Value="{Binding Top}" />
                </Style>
            </ItemsControl.ItemContainerStyle>

            <!-- Each item is a Rectangle, fully data-bound -->
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type models:IWorkbenchItem}">
                    <local:FileIcon />
                </DataTemplate>
            </ItemsControl.ItemTemplate>

        </ItemsControl>
        
        
        <!-- Status bar -->
        <!--<Border Grid.Row="2" Background="#3a3a3a" Height="22">
            <TextBlock x:Name="StatusText" Text="Ready." Foreground="White" VerticalAlignment="Center" Margin="6,0" />
        </Border>-->

    </Grid>
</UserControl>
